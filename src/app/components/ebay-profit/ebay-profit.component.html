<div class="container text-center">
  <a class="inline_block" href="https://www.ebay.com" target="_blank">
    <img class="main_page_logo" src="../../../assets/img/ebay_logo.png">
  </a>
</div>

<ul class="dropdown-menu" aria-labelledby="dropdownMenu3">
  <li class="dropdown-header">Dropdown header</li>
  <li class="dropdown-header">Dropdown header</li>
  <li class="dropdown-header">Dropdown header</li>
</ul>

<section class="container container_entire">
  <div class="row">
    <button type="button" class="btn btn-outline-primary"
            (click)="toggle_mode()">{{is_profit_mode?'Find Sale Value':'Find Profit'}}</button>
  </div>
  <div class="row flex_center">
    <div class = "flex center_vertically" [ngClass]="{'border_green_background': !is_profit_mode}">
      <label class="center_vertically green_text">Sale value:</label>
      <div class="input-group short_input margin_left_short" *ngIf="is_profit_mode;else lbl_sale_value">
        <span class="input-group-addon green_text">$</span>
        <input type="number" step="any" class="form-control green_text" min="0"
               [(ngModel)]="sale_value" (input)="response_update_calculations()">
      </div>
      <ng-template #lbl_sale_value>
        <label class = "center_vertically green_text margin_left_short">{{sale_value | number : '1.2-2'}}</label>
      </ng-template>
    </div>

    <div class = "flex center_vertically">
      <label class="red_text center_vertically margin_left_long">eBay fee percent:</label>
      <div class="input-group short_input margin_left_short">
        <span class="input-group-addon red_text">%</span>
        <input type="number" step="any" class="form-control red_text" min="0"
               [(ngModel)]="ebay_fee_percent" (input)="response_update_calculations()">
      </div>
    </div>

    <div class = "margin_left_long red_text border_red_background">
      <table>
        <tr>
          <td class = "text_align_right">eBay fee =&nbsp;</td>
          <td> {{this.cost_ebay_fee | number : '1.2-2'}}</td> <!-- pipe = 1 digit in front of dec. At least 2 digit after, No more than 2 digit aft -->
        </tr>
        <tr>
          <td class = "text_align_right">PayPal fee =&nbsp;</td>
          <td > {{this.cost_paypal_fee | number : '1.2-2'}}</td>
        </tr>
      </table>
    </div>

    <app-ebay-paypal-fee-popover class = "margin_left center_vertically"></app-ebay-paypal-fee-popover>
  </div>

  <div class="row flex margin_top">
    <label class="red_text center_vertically">Product Cost:</label>
    <div class="margin_left">
      <div class="btn-toolbar margin_top_small" role="toolbar" aria-label="Toolbar with button groups">
        <div class="btn-group mr-2" role="group" aria-label="First group">
          <button type="button" class="btn btn-secondary btn_border"
                  (click)="response_mult_by(2); response_update_calculations()">2x</button>
          <button type="button" class="btn btn-secondary btn_border"
                  (click)="response_mult_by(3); response_update_calculations()">3x</button>
        </div>
        <div class="btn-group mr-2" role="group" aria-label="Second group">
          <button type="button" class="btn btn-secondary btn_border"
                  (click)="response_mult_by(1/2); response_update_calculations()">1/2</button>
          <button type="button" class="btn btn-secondary btn_border"
                  (click)="response_mult_by(1/3); response_update_calculations()">1/3</button>
        </div>
      </div>

      <div class="flex">
        <div class="input-group short_input center_horizontally">
          <span class="input-group-addon red_text">$</span>
          <input type="number" step="any"
                 class="form-control red_text" min="0"
                 [(ngModel)]="cost_product" (input)="response_update_calculations()">
        </div>
      </div>
    </div>

    <div class = "margin_left_long flex center_vertically red_text">
      <label class="center_vertically">Misc Cost:</label>
      <div class="input-group short_input margin_left_short">
        <span class="input-group-addon red_text">$</span>
        <input type="number" step="any" class="form-control red_text" min="0"
               [(ngModel)]="cost_misc" (input)="response_update_calculations()">
      </div>
      <ng-template #lbl_cost_misc>
        <label class = "center_vertically margin_left_short">{{cost_misc | number : '1.2-2'}}</label>
      </ng-template>
    </div>
  </div>

  <div class = "row flex margin_top">
    <label class ="center_vertically red_text">Shipping Type:</label>
    <select class = "margin_left_short red_text"
            (change)="response_ship_change($event.target.value); response_update_calculations()">
      <option *ngFor="let ship_option of ship_option_array">{{ship_option}}</option>
    </select>

    <div class = "margin_left_long" *ngIf="show_first_class_shipping">
      <label class = "red_text">Weight (oz):</label>
      <select class = "red_text"
              (change)="response_first_class_weight($event.target.value); response_update_calculations()">
        <option *ngFor="let weight of oz_first_class_array"
                [selected]="weight === first_class_weight">{{weight}}</option>
      </select>
    </div>

    <div class="flex" *ngIf="!show_custom_price_shipping">
      <label class="margin_left center_vertically red_text">$</label>
      <label class="center_vertically red_text">{{cost_shipping  | number : '1.2-2'}}</label>
    </div>

    <div class = "margin_left flex center_vertically" *ngIf="show_custom_price_shipping">
      <div class="input-group short_input margin_left_short">
        <span class="input-group-addon red_text">$</span>
        <input type="number" step="any" class="form-control red_text" min="0"
                [(ngModel)]="cost_shipping" (input)="response_update_calculations()">
      </div>
    </div>
    
    <app-box-weight-popover class = "margin_left"></app-box-weight-popover>
  </div>
  
  <hr>
  <div class="row flex margin_top">
    <div class = "font_size_med"
         [ngClass] = "!is_profit_mode? '':final_profit >= 0.50?'border_green_background':'border_red_background'">
      <p class = "text_align_center bold_underline">Calculation</p>
      <table class = "margin_top">
        <tbody style="border-bottom:2px solid black">
        <tr class="green_text">
          <td>+</td>
          <td class="text_align_right padding_left_small">{{sale_value | number : '1.2-2'}}</td>
          <td class = "padding_left_small">(Sale Value)</td>
        </tr>
        <tr class="red_text">
          <td>-</td>
          <td class="text_align_right padding_left_small">{{cost_ebay_fee | number : '1.2-2'}}</td>
          <td class = "padding_left_small">(eBay fee)</td>
        </tr>
        <tr class="red_text">
          <td>-</td>
          <td class="text_align_right padding_left_small" >{{cost_paypal_fee | number : '1.2-2'}}</td>
          <td class = "padding_left_small">(PayPal fee)</td>
        </tr>
        <tr class="red_text">
          <td>-</td>
          <td class="text_align_right padding_left_small">{{cost_product | number : '1.2-2'}}</td>
          <td class = "padding_left_small">(Product cost)</td>
        </tr>
        <tr class="red_text">
          <td>-</td>
          <td class="text_align_right padding_left_small">{{cost_misc | number : '1.2-2'}}</td>
          <td class = "padding_left_small">(Misc cost)</td>
        </tr>
        <tr class="red_text">
          <td>-</td>
          <td class="text_align_right padding_left_small">{{cost_shipping | number : '1.2-2'}}</td>
          <td class = "padding_left_small">(Ship fee)</td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
          <td [ngClass]="final_profit >= 0.00 || !is_profit_mode?'green_text':'red_text'">
            {{!is_profit_mode || final_profit >= 0.00?'+':'-'}}
          </td>

          <td class="text_align_right padding_left_small"
              [ngClass]="final_profit >= 0.00?'green_text':'red_text'"
              *ngIf="is_profit_mode;else input_final_profit">
            {{get_absolute(final_profit) | number : '1.2-2'}}
          </td>
          <ng-template #input_final_profit>
            <div class="input-group short_input margin_left_short">
              <span class="input-group-addon green_text">$</span>
              <input type="number" step="any" class="form-control green_text" min="0"
                     [(ngModel)]="final_profit" (input)="response_update_calculations()">
            </div>
          </ng-template>

          <td class = "padding_left_small" [ngClass]="final_profit >= 0.00 || !is_profit_mode?'green_text':'red_text'">
            (Final profit)
          </td>
        </tr>
        </tfoot>
      </table>
    </div>
  </div>
</section>


